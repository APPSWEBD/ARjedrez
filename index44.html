
<!DOCTYPE html>
<html><!-- include A-Frame obviously -->
<script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>

<!-- include ar.js for A-Frame -->
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>

<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.min.js"></script>

<script>
  THREEx.ArToolkitContext.baseURL = 'https://rawgit.com/jeromeetienne/ar.js/master/three.js/'
  </script>
<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam; trackingMethod: best'>


   

     
    <!-- CHESS PIECES -->




    <a-assets>
      <a-asset-item id="chess1" src="box.glb" crossOrigin="anonymous"></a-asset-item> 
    </a-assets>







    

     <a-marker id='chess1'   preset='hiro'  emitevents='true' registerevents>
        <!-- <a-box position='0 0.5 0' material='color: green;'>-->  <a-gltf-model src="#chess1" animation-mixer="loop:repeat"></a-gltf-model>
     </a-marker>
 

     <a-marker id='chess3'  preset='kanji'   emitevents='true' registerevents smooth='true' >
        <!-- <a-box position='0 0.5 0' material='color: green;'>-->  <a-gltf-model src="#chess3" animation-mixer="loop:repeat"></a-gltf-model>
     </a-marker>
 


 
  


    <!-- add a simple camera -->
    <a-entity camera></a-entity>

  </a-scene>

  <audio>
    // AAC file (Chrome/Safari/IE9)
    <source src="R2D2.mp3" type="audio/mpeg" />
   
   </audio>
</body>


<script>
  window.addEventListener('camera-init', (data) => {
      console.log('camera-init', data);
  })
  window.addEventListener('camera-error', (error) => {
      console.log('camera-error', error);
  })
AFRAME.registerComponent('registerevents', {
  init: function () {
    var marker = this.el;
    marker.addEventListener('markerFound', function() {
      var markerId = marker.id;
      console.log('markerFound', markerId);
      var audio = new Audio(markerId + 'in.mp3');
audio.play();
      // TODO: Add your own code here to react to the marker being found.
    });
    marker.addEventListener('markerLost', function() {
      var markerId = marker.id;
      console.log('markerLost', markerId);
      var audio = new Audio(markerId + 'out.mp3');
audio.play();
      // TODO: Add your own code here to react to the marker being lost.
    });
  }
});
</script>